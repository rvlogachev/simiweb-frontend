(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{179:function(t,e,a){"use strict";a.r(e);var r=a(231),s=a(228),i=a(232),n=a.n(i),o=a(242),l=a(246),c=a.n(l),u=a(243),d=a(236),f=a.n(d),v={metaInfo:{title:"Files"},layout:s.a,components:{Icon:r.a,Pagination:o.a,SearchFilter:u.a},props:{files:Object,filters:Object,business_orgs:Array,start_years:Array},data(){return{form:{search:this.filters.search,start_year:this.filters.start_year,one_or_three:this.filters.one_or_three,trashed_button:this.filters.trashed_button}}},watch:{form:{handler:f()((function(){let t=c()(this.form);this.$inertia.replace(this.route("operational-event",Object.keys(t).length?t:{remember:"forget"}))}),150),deep:!0}},methods:{reset(){this.form=n()(this.form,()=>null)},toggle(){1==this.form.one_or_three?this.form.one_or_three=3:this.form.one_or_three=1,this.log(this.form.one_or_three)},log(t){console.log(t)}}},p=a(224),_=Object(p.a)(v,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"panelTwo color-up-NN border-b w-full p-4 md:py-0 text-sm md:text-md flex justify-between items-center"},[e("div",{staticClass:"color-text-bar"},[e("inertia-link",{staticClass:"upload-button-default btn-panel",attrs:{href:t.route("uploads.uoperationalevent")}},[e("span",[t._v("Загрузить данные")]),t._v(" "),e("span",{staticClass:"hidden md:inline"},[t._v("из MS Excel")])]),t._v(" "),e("inertia-link",{staticClass:"upload-button-default btn-panel",attrs:{href:t.route("uploads.uoperationaleventstaging")}},[e("span",[t._v("Загрузить данные")]),t._v(" "),e("span",{staticClass:"hidden md:inline"},[t._v("из КСИП")])])],1)]),t._v(" "),e("div",{staticClass:"px-4 py-8 md:p-12"},[e("h1",{staticClass:"font-bold text-3xl"},[t._v("\n        Операционная программа\n      ")]),t._v(" "),e("div",{staticClass:"mb-6 flex justify-between items-center"}),t._v(" "),e("h1",{staticClass:"mb-12 font-bold text-3xl"}),t._v(" "),e("div",{staticClass:"mb-6 flex justify-between items-center"},[e("search-filter",{staticClass:"w-full max-w-md mr-4",on:{reset:t.reset},model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}},[e("label",{staticClass:"block text-gray-700"},[t._v("Год моделирования:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.start_year,expression:"form.start_year"}],staticClass:"mt-1 w-full form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"start_year",e.target.multiple?a:a[0])}}},[e("option",{domProps:{value:null}},[t._v("Без фильтра")]),t._v(" "),t._l(t.start_years,(function(a){return e("option",{key:a.start_year,domProps:{value:a.start_year}},[t._v(t._s(a.start_year))])}))],2)]),t._v(" "),e("div",{staticClass:"w-full flex justify-between items-center max-w-2xl"},[e("div",[e("div",{staticClass:"edited"},[t._v(" Помеченные на удаление")]),t._v(" "),e("label",{staticClass:"switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.trashed_button,expression:"form.trashed_button"}],staticClass:"trash-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.trashed_button)?t._i(t.form.trashed_button,null)>-1:t.form.trashed_button},on:{change:function(e){var a=t.form.trashed_button,r=e.target,s=!!r.checked;if(Array.isArray(a)){var i=t._i(a,null);r.checked?i<0&&t.$set(t.form,"trashed_button",a.concat([null])):i>-1&&t.$set(t.form,"trashed_button",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.form,"trashed_button",s)}}}),t._v(" "),e("span",{staticClass:"slider round"})])]),t._v(" "),e("div",{staticClass:"py-2"},[e("button",{staticClass:"btn-indigo items-center w-40 rounded-r-none",class:[3==this.form.one_or_three?"inactive":"active"],attrs:{type:"button"},on:{click:t.toggle}},[t._v("Горизонт 1 год")]),e("button",{staticClass:"btn-indigo items-center w-40 rounded-l-none",class:[1==this.form.one_or_three?"inactive":"active"],attrs:{type:"button"},on:{click:t.toggle}},[t._v("Горизонт 3 года")])])])],1),t._v(" "),e("div",{staticClass:"bg-white rounded shadow overflow-x-auto"},[e("table",{staticClass:"w-full whitespace-no-wrap"},[t._m(0),t._v(" "),t._l(t.files.data,(function(a){return e("tr",{key:a.id,staticClass:"hover:bg-gray-100 focus-within:bg-gray-100"},[e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-4 flex items-center focus:text-indigo-500",attrs:{href:t.route("operational-event.edit",a.id)}},[t._v("\n                "+t._s(a.filename)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-4 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.group_be_code)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-4 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.start_year)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("a",{staticClass:"px-4 flex items-center hrli"},[t._v(" ")]),t._v(" "),e("a",{staticClass:"flex items-center hrli",attrs:{tabindex:"-1"}},[a.deleted_at?e("icon",{staticClass:"block w-6 h-6 fill-gray-400",attrs:{name:"trash"}}):t._e(),t._v(" "),a.metaagree_state?t._e():e("icon",{staticClass:"block w-6 h-6 fill-gray-400",attrs:{name:"earmark-check-agree"}}),t._v(" "),a.metaagree_state?e("icon",{staticClass:"block w-6 h-6 fill-gray-400",attrs:{name:"earmark-x-agree"}}):t._e()],1)]),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-2 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.metaagree_user_name)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-2 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.metaload_user_name)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-2 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.metaload_date)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-2 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.metaagree_date)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t"},[e("inertia-link",{staticClass:"px-6 py-2 flex items-center",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[t._v("\n                "+t._s(a.one_or_three)+"\n              ")])],1),t._v(" "),e("td",{staticClass:"border-t w-px"},[e("inertia-link",{staticClass:"flex items-center hrli",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[e("icon",{staticClass:"block w-6 h-6 fill-gray-400",attrs:{name:"earmark-arrow-down"}})],1),t._v(" "),e("inertia-link",{staticClass:"flex items-center hrli",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[e("icon",{staticClass:"block w-6 h-6 fill-gray-400",attrs:{name:"earmark-check"}})],1),t._v(" "),e("inertia-link",{staticClass:"flex items-center hrli",attrs:{href:t.route("operational-event.edit",a.id),tabindex:"-1"}},[e("icon",{staticClass:"block w-6 h-6 fill-gray-400",attrs:{name:"earmark-zip"}})],1)],1)])})),t._v(" "),0===t.files.data.length?e("tr",[e("td",{staticClass:"border-t px-6 py-4",attrs:{colspan:"10"}},[t._v("No accounts found.")])]):t._e()],2)]),t._v(" "),e("pagination",{attrs:{links:t.files.links}})],1)])}),[function(){var t=this,e=t._self._c;return e("tr",{staticClass:"text-left font-bold"},[e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Наименование файла"),e("br"),t._v("после загрузки")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Перечень БЕ")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Год начала"),e("br"),t._v("планирования")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Состояние")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Пользователь "),e("br"),t._v("согласовавший файл")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Пользователь "),e("br"),t._v("загрузивший файл")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Дата загрузки")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Дата согласования")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Горизонт"),e("br"),t._v("планирования")]),t._v(" "),e("th",{staticClass:"px-6 pt-6 pb-4"},[t._v("Действия")])])}],!1,null,null,null);e.default=_.exports},232:function(t,e,a){var r=a(249),s=a(233),i=a(250);t.exports=function(t,e){var a={};return e=i(e,3),s(t,(function(t,s,i){r(a,s,e(t,s,i))})),a}},233:function(t,e,a){var r=a(234),s=a(248);t.exports=function(t,e){return t&&r(t,e,s)}},234:function(t,e,a){var r=a(235)();t.exports=r},235:function(t,e){t.exports=function(t){return function(e,a,r){for(var s=-1,i=Object(e),n=r(e),o=n.length;o--;){var l=n[t?o:++s];if(!1===a(i[l],l,i))break}return e}}},236:function(t,e,a){var r=a(237),s=a(229);t.exports=function(t,e,a){var i=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return s(a)&&(i="leading"in a?!!a.leading:i,n="trailing"in a?!!a.trailing:n),r(t,e,{leading:i,maxWait:e,trailing:n})}},237:function(t,e,a){var r=a(229),s=a(238),i=a(239),n=Math.max,o=Math.min;t.exports=function(t,e,a){var l,c,u,d,f,v,p=0,_=!1,m=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var a=l,r=c;return l=c=void 0,p=e,d=t.apply(r,a)}function x(t){return p=t,f=setTimeout(y,e),_?b(t):d}function C(t){var a=t-v;return void 0===v||a>=e||a<0||m&&t-p>=u}function y(){var t=s();if(C(t))return g(t);f=setTimeout(y,function(t){var a=e-(t-v);return m?o(a,u-(t-p)):a}(t))}function g(t){return f=void 0,h&&l?b(t):(l=c=void 0,d)}function w(){var t=s(),a=C(t);if(l=arguments,c=this,v=t,a){if(void 0===f)return x(v);if(m)return clearTimeout(f),f=setTimeout(y,e),b(v)}return void 0===f&&(f=setTimeout(y,e)),d}return e=i(e)||0,r(a)&&(_=!!a.leading,u=(m="maxWait"in a)?n(i(a.maxWait)||0,e):u,h="trailing"in a?!!a.trailing:h),w.cancel=function(){void 0!==f&&clearTimeout(f),p=0,l=v=c=f=void 0},w.flush=function(){return void 0===f?d:g(s())},w}},238:function(t,e,a){var r=a(245);t.exports=function(){return r.Date.now()}},239:function(t,e,a){var r=a(240),s=a(229),i=a(247),n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var a=o.test(t);return a||l.test(t)?c(t.slice(2),a?2:8):n.test(t)?NaN:+t}},240:function(t,e,a){var r=a(241),s=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(s,""):t}},241:function(t,e){var a=/\s/;t.exports=function(t){for(var e=t.length;e--&&a.test(t.charAt(e)););return e}},242:function(t,e,a){"use strict";var r={props:{links:Array}},s=a(224),i=Object(s.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-6 -mb-1 flex flex-wrap"},[t._l(t.links,(function(a,r){return[null===a.url?e("div",{key:r,staticClass:"mr-1 mb-1 px-4 py-3 text-sm border rounded text-gray-400",class:{"ml-auto":"Next"===a.label}},[t._v(t._s(a.label))]):e("inertia-link",{key:r,staticClass:"mr-1 mb-1 px-4 py-3 text-sm border rounded hover:bg-white focus:text-indigo-500",class:{"color-NN-button":a.active,"ml-auto":"Next"===a.label},attrs:{href:a.url}},[t._v(t._s(a.label))])]}))],2)}),[],!1,null,null,null);e.a=i.exports},243:function(t,e,a){"use strict";var r={components:{Dropdown:a(244).a},props:{value:String,maxWidth:{type:Number,default:300}}},s=a(224),i=Object(s.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"flex w-full bg-white shadow rounded"},[e("dropdown",{staticClass:"px-4 md:px-6 rounded-l border-r hover:bg-gray-100 focus:border-white focus:shadow-outline focus:z-10",attrs:{"auto-close":!1,placement:"bottom-start"}},[e("div",{staticClass:"flex items-baseline"},[e("span",{staticClass:"text-gray-700 hidden md:inline"},[t._v("Фильтр:")]),t._v(" "),e("svg",{staticClass:"w-2 h-2 fill-gray-700 md:ml-2",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 961.243 599.998"}},[e("path",{attrs:{d:"M239.998 239.999L0 0h961.243L721.246 240c-131.999 132-240.28 240-240.624 239.999-.345-.001-108.625-108.001-240.624-240z"}})])]),t._v(" "),e("div",{staticClass:"mt-2 px-4 py-6 w-screen shadow-xl bg-white rounded",style:{maxWidth:t.maxWidth+"px"},attrs:{slot:"dropdown"},slot:"dropdown"},[t._t("default")],2)]),t._v(" "),e("input",{staticClass:"relative w-full px-6 py-3 rounded-r focus:shadow-outline",attrs:{autocomplete:"off",type:"text",name:"search",placeholder:"Поиск…"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})],1),t._v(" "),e("button",{staticClass:"ml-3 text-sm text-gray-500 hover:text-gray-700 focus:text-indigo-500",attrs:{type:"button"},on:{click:function(e){return t.$emit("reset")}}},[t._v("Очистить")])])}),[],!1,null,null,null);e.a=i.exports}}]);